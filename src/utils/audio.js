export const SOUND_SETTINGS = {
	default: {
		distance: 1,
		refDistance: 1,
		rolloffFactor: 1,
		volume: 0.5,
	},
	ambient: {
		distance: 3,
		refDistance: 1,
		rolloffFactor: 3,
		volume: 1,
	},
	effect: {
		distance: 0.75,
		refDistance: 1,
		rolloffFactor: 1,
		volume: 1,
	},
};

export const SOUNDS = {
	ambiant1: {
		ogg: '/sounds/ambiant1.ogg',
		mp3: '/sounds/ambiant1.mp3',
		settings: 'ambient',
	},
	ambiant2: {
		ogg: '/sounds/ambiant2.ogg',
		mp3: '/sounds/ambiant2.mp3',
		settings: 'ambient',
	},
	boom: {
		ogg: '/sounds/boom.ogg',
		mp3: '/sounds/boom.mp3',
		settings: 'ambient',
	},
	tense: {
		ogg: '/sounds/tense.ogg',
		mp3: '/sounds/tense.mp3',
		settings: 'ambient',
	},
	breathing: {
		ogg: '/sounds/breathing.ogg',
		mp3: '/sounds/breathing.mp3',
		settings: 'ambient',
	},
	whiteNoise: {
		ogg: '/sounds/white_noise.ogg',
		mp3: '/sounds/white_noise.mp3',
		settings: 'ambient',
	},
	radio: {
		ogg: '/sounds/radio.ogg',
		mp3: '/sounds/radio.mp3',
		settings: 'ambient',
	},
	// Sons de pas
	step1: {
		ogg: '/sounds/step1.ogg',
		mp3: '/sounds/step1.mp3',
		settings: 'steps',
	},
	step2: {
		ogg: '/sounds/step2.ogg',
		mp3: '/sounds/step2.mp3',
		settings: 'steps',
	},
	step3: {
		ogg: '/sounds/step3.ogg',
		mp3: '/sounds/step3.mp3',
		settings: 'steps',
	},
	step4: {
		ogg: '/sounds/step4.ogg',
		mp3: '/sounds/step4.mp3',
		settings: 'steps',
	},
	step5: {
		ogg: '/sounds/step5.ogg',
		mp3: '/sounds/step5.mp3',
		settings: 'steps',
	},
	step6: {
		ogg: '/sounds/step6.ogg',
		mp3: '/sounds/step6.mp3',
		settings: 'steps',
	},
	step7: {
		ogg: '/sounds/step7.ogg',
		mp3: '/sounds/step7.mp3',
		settings: 'steps',
	},
	step8: {
		ogg: '/sounds/step8.ogg',
		mp3: '/sounds/step8.mp3',
		settings: 'steps',
	},
	step9: {
		ogg: '/sounds/step9.ogg',
		mp3: '/sounds/step9.mp3',
		settings: 'steps',
	},
	// Sons du monstre
	monsterStep1: {
		ogg: '/sounds/monster_step1.ogg',
		mp3: '/sounds/monster_step1.mp3',
		settings: 'monster',
	},
	monsterStep2: {
		ogg: '/sounds/monster_step2.ogg',
		mp3: '/sounds/monster_step2.mp3',
		settings: 'monster',
	},
	monsterStep3: {
		ogg: '/sounds/monster_step3.ogg',
		mp3: '/sounds/monster_step3.mp3',
		settings: 'monster',
	},
	monsterStep4: {
		ogg: '/sounds/monster_step4.ogg',
		mp3: '/sounds/monster_step4.mp3',
		settings: 'monster',
	},
	// Sons d'interaction
	doorOpen: {
		ogg: '/sounds/open.ogg',
		mp3: '/sounds/open.mp3',
		settings: 'interaction',
	},
	doorClose: {
		ogg: '/sounds/close.ogg',
		mp3: '/sounds/close.mp3',
		settings: 'interaction',
	},
	closetOpen: {
		ogg: '/sounds/closet_open.ogg',
		mp3: '/sounds/closet_open.mp3',
		settings: 'interaction',
	},
	closetClose: {
		ogg: '/sounds/closet_close.ogg',
		mp3: '/sounds/closet_close.mp3',
		settings: 'interaction',
	},
	window: {
		ogg: '/sounds/window.ogg',
		mp3: '/sounds/window.mp3',
		settings: 'interaction',
	},
	curtain: {
		ogg: '/sounds/curtain.ogg',
		mp3: '/sounds/curtain.mp3',
		settings: 'interaction',
	},
	bottles: {
		ogg: '/sounds/bottles.ogg',
		mp3: '/sounds/bottles.mp3',
		settings: 'interaction',
	},
	bedsheets: {
		ogg: '/sounds/bedsheets.ogg',
		mp3: '/sounds/bedsheets.mp3',
		settings: 'interaction',
	},
	bed: {
		ogg: '/sounds/bed.ogg',
		mp3: '/sounds/bed.mp3',
		settings: 'interaction',
	},
	switchOn: {
		ogg: '/sounds/switch_on.ogg',
		mp3: '/sounds/switch_on.mp3',
		settings: 'interaction',
	},
	switchOff: {
		ogg: '/sounds/switch_off.ogg',
		mp3: '/sounds/switch_off.mp3',
		settings: 'interaction',
	},
	bulb: {
		ogg: '/sounds/bulb.ogg',
		mp3: '/sounds/bulb.mp3',
		settings: 'interaction',
	},
	neon: {
		ogg: '/sounds/neon.ogg',
		mp3: '/sounds/neon.mp3',
		settings: 'interaction',
	},
	beep: {
		ogg: '/sounds/beep.ogg',
		mp3: '/sounds/beep.mp3',
		settings: 'interaction',
	},
	flashlight: {
		ogg: '/sounds/flashlight.ogg',
		mp3: '/sounds/flashlight.mp3',
		settings: 'interaction',
	},
	// Sons de dégâts
	hurt1: {
		ogg: '/sounds/hurt1.ogg',
		mp3: '/sounds/hurt1.mp3',
		settings: 'damage',
	},
	hurt2: {
		ogg: '/sounds/hurt2.ogg',
		mp3: '/sounds/hurt2.mp3',
		settings: 'damage',
	},
	hurt3: {
		ogg: '/sounds/hurt3.ogg',
		mp3: '/sounds/hurt3.mp3',
		settings: 'damage',
	},
	hurt4: {
		ogg: '/sounds/hurt4.ogg',
		mp3: '/sounds/hurt4.mp3',
		settings: 'damage',
	},
	impact: {
		ogg: '/sounds/impact.ogg',
		mp3: '/sounds/impact.mp3',
		settings: 'damage',
	},
	// Sons spéciaux
	jumpScare: {
		ogg: '/sounds/jump_scare.ogg',
		mp3: '/sounds/jump_scare.mp3',
		settings: 'special',
	},
	jumpScareAmbiance: {
		ogg: '/sounds/jump_scare_ambiance.ogg',
		mp3: '/sounds/jump_scare_ambiance.mp3',
		settings: 'special',
	},
	scratching: {
		ogg: '/sounds/scratching.ogg',
		mp3: '/sounds/scratching.mp3',
		settings: 'special',
	},
	knocking: {
		ogg: '/sounds/knocking.ogg',
		mp3: '/sounds/knocking.mp3',
		settings: 'special',
	},
};

export function preloadSounds() {
	Object.values(SOUNDS).forEach((sound) => {
		const url = canPlayOgg() ? sound.ogg : sound.mp3;
		if (url) {
			const audio = new Audio(url);
			audio.preload = 'auto';
		}
	});
}

const canPlayOgg = () => {
	const audio = new Audio();
	return audio.canPlayType('audio/ogg; codecs="vorbis"') !== '';
};

export const getSoundUrl = (soundName) => {
	const sound = SOUNDS[soundName];
	if (!sound) {
		console.warn(`Sound ${soundName} not found`);
		return null;
	}

	if (canPlayOgg() && sound.ogg) {
		return sound.ogg;
	}

	if (sound.mp3) {
		return sound.mp3;
	}

	console.warn(`No supported audio format found for ${soundName}`);
	return null;
};

export const usePositionalSound = (soundName) => {
	const sound = SOUNDS[soundName];
	if (!sound) {
		console.warn(`Sound ${soundName} not found`);
		return {};
	}

	let url;
	if (canPlayOgg() && sound.ogg) {
		url = sound.ogg;
	} else if (sound.mp3) {
		url = sound.mp3;
	} else {
		console.warn(`No supported audio format found for ${soundName}`);
		return {};
	}

	return {
		url,
		loop: false,
		distance: 1,
		refDistance: 1,
		rolloffFactor: 1,
		volume: 0.5,
	};
};
